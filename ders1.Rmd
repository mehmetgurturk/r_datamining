---
title: "Veri Tipi Belirleme"
author: "Mehmet Gurturk"
date: '2022-03-22'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Çalışacağımız verisetinin içeri aktarılması için `read.csv()` fonksiyonu kullanılır. 
İçeri aktaracağımız lokal dosya yolu ya da uzak sunucuda tutulan dosyanın yolu fonskiyonuna girdi olarak verilir.

```{r}
veriseti <- read.csv("Fin500.csv")
```

Veriseti yüklendikten sonra verisetinin içeriğini kontrol etmek üzere `head()` ve `tail()` fonsiyonları kullanılır.

```{r}
head(veriseti) 
tail(veriseti)
```

Verisetinin ilk ve son altı (6) satırını gördükten sonra versitesinin yapısına bakmak için `str()` fonksiyonunu ve verisetinin özetini görmek için ise `summary()` fonksiyonunu çalıştırdık.

```{r}
str(veriseti)
summary(veriseti)
```

Verisetimizin içerisindeki `veriseti$Industry`, `veriseti$Inception` ve `veriseti$City` verilerimizi `as.factor()` fonksiyonu ile kendi içlerinde gruplandırdık ve tekrar `<-` komutu ile verilirimizi kendi üzerlerine tekrar atadık.

```{r}
veriseti$Industry <- as.factor(veriseti$Industry)
veriseti$Inception <- as.factor(veriseti$Inception)
veriseti$City <- as.factor(veriseti$City)
```

Verisetimizin içerisinde bazı verilerimizin tipi, verilerin yazılışı uygun değildi. Verilerimizi uygun hale getirmek için öncelikle `gsub()` fonksiyonu ile verilerimizi temizledik. Daha sonra tekrar verilerimizi `<-` komutu ile atadık. Sadece `sub()` komutu ilk sıradaki veriyi değiştirir `gsub()` komutu ise başındaki 'g' yani 'global'den dolayı her argümana bakarak değişim gerçekleştirecek.

Daha sonra Verilerimizin türünü değiştirerek 'numeric' hale dönüştürebilmek için `as.numeric()` fonksiyonunu kullandık. Ve `<-` komutu ile verilirimizi tekrar atama işlemlerini gerçekleştirdik. İşlemleri ilk olarak `veriseti$Expenses` verimize uyguluyoruz.

```{r}
gsub(" Dollars", "", veriseti$Expenses)
gsub(",", "", veriseti$Expenses)
veriseti$Expenses <- as.numeric(veriseti$Expenses)
```

Daha sonra işlemleri `veriseti$Growth` verimize uyguluyoruz.

```{r}
gsub("%", "", veriseti$Growth)
veriseti$Growth <- as.numeric(veriseti$Growth)
```

Son verimizin içerisinde `$` işareti yer almaktadır. Bu işaret R dili için önem arz ettiğinden dolayı bu işareti kaldırırken yanında özel bir işaret daha kullanmamız gerekmektedir. Bunun için `\\$` şeklinde kullanacağız. Ayrıca verilerimizde kullandığımız fonksiyonları iç içe kullanabiliriz.

```{r}
gsub("\\$", "", veriseti$Revenue)
veriseti$Revenue <- as.numeric(gsub(",", "", veriseti$Revenue))
```

Missing Value değerleri ile uğraşacağımzıdan dolayı `library(Amelia)` paketini çağırdık.

```{r}
library(Amelia)
```

Verisetimizin missingness map'ini çizdirebilmek için `missmap()` komutunu uyguladık.

```{r}
missmap(veriseti)
```

Verisetimizin kaç satır ve kaç sütundan meydana geldiğini görebilmek için `dim()` komutunu uyguladık.

```{r}
dim(veriseti)
```

Verisetimizde istediğimiz satır ve sütunları `veriseti[]` komutu uyguluyoruz.

```{r}
veriseti[3,2] #3.satır 2.sütun
veriseti[3, ] #3.satırın tamamı
veriseti[ ,2] #2.satırın tamamı
```

Verisetimizin tam yani NA değer içerip içermediğini görebilmek için `complete.cases()` komutunu uyguluyoruz. Verisetimiz tam yani NA değer yoksa true, NA değer varsa false olarak geri dönüş vermektedir.

```{r}
complete.cases(veriseti)
```

Verisetimizdeki NA değerlerinin yer aldığı satırı göstermek için;

```{r}
veriseti[!complete.cases(veriseti), ] # ! ile incomplete olanları getirdik
```

Verisetimizde geliri 9 milyon olanları getirmek için;

```{r}
veriseti$Revenue == 9746272
```

Verisetimizde geliri 9 milyon olan satırı getirmek için;

```{r}
veriseti[veriseti$Revenue == 9746272, ]
```

True'ların yanında NA'lar dönüyor. Bundan kaçınmak için `which()` komutunu kullanıyoruz.

```{r}
which(veriseti$Revenue == 9746272)
```

Verisetimizde NA değeri olan satırları getirmek için;

```{r}
veriseti[is.na(veriseti$Expenses), ]
```

Verisetimizde çalışan sayısı 45 olan satırı getirmek için;

```{r}
veriseti[which(veriseti$Employees == 45), ]
```

verisetimizi yedeklemek için `<-` komutunu kullandık.

```{r}
backup <- veriseti
```

Verisetimizde complete olanlar ile tekrar veriseti oluşturmak için;

```{r}
veriseti <- veriseti[complete.cases(veriseti), ]
```

Industry verisinde dolu olanlar ile tekrar veriseti oluşturduk.

```{r}
veriseti <- veriseti[!is.na(veriseti$Industry), ]
```

Verisetindeki satır numaralarını görmek için `row.names()` komutunu kullandık.

```{r}
row.names(veriseti)
```

Verisetimizde 1'den başlayarak tekrar satır numarası atamak için `1:nrow()` komutunu kullandık.

```{r}
veriseti <- 1:nrow(veriseti)
```

Kayıp verilerin değiştirilmesi için ilk olarak State sütununda NA olan değerleri çağırdık daha sonra da NA verileri değiştirdik.

```{r}
veriseti[!complete.cases(veriseti), ]
veriseti[is.na(veriseti$State), ]
veriseti[is.na(veriseti$State) & veriseti$City == "New York", ]
veriseti[is.na(veriseti$State) & veriseti$City == "New York", "State"] <- "NY" #City sütunu New York olan ancak State sütununda NA olan yerlere NY ekledik

veriseti[is.na(veriseti$State) & veriseti$city == "San Francisco"]
veriseti[is.na(veriseti$State) & veriseti$City == "San Francisco", "State"] <- "CA"
```



